(()=>{"use strict";const t=`&appid=${apiKey}`,e=async function(){try{console.log("loading");const t=await fetch("city.list.json",{mode:"cors"});return await t.json()}catch(t){console.log(t)}}();const n={clear:"01d",clouds:"02d","scattered clouds":"03d","broken clouds":"04d","shower rain":"09d",rain:"10d",thunderstorm:"11d",snow:"13d",mist:"50d"};const o=document.querySelector("#submit-button"),a=document.querySelector("#city-name"),c=document.querySelector("#display");function d(){for(;c.firstChild;)c.firstChild.remove()}async function i(e){d();try{const o=await async function(e){try{const n=`lat=${e.coord.lat}&lon=${e.coord.lon}&exclude=minutely,hourly&units=imperial`,o=await fetch(`https://api.openweathermap.org/data/2.5/onecall?${n}${t}`,{mode:"cors"});return(await o.json()).daily.map((t=>{return{weatherDescription:(e=t).weather[0].main,clouds:e.clouds,humidity:e.humidity,rain:e.rain,maxTemp:Math.round(parseFloat(e.temp.max)),minTemp:Math.round(parseFloat(e.temp.min))};var e}))}catch(t){console.log(t)}}(e),a=document.createElement("div");a.classList.add("weather-data-container"),o.forEach((t=>{const e=function(t){const e=document.createElement("div");e.classList.add("weather-data-display");const o=document.createElement("div");o.classList.add("weekday"),o.textContent="Day",e.appendChild(o);const a=document.createElement("img");a.src=function(t){if(n.hasOwnProperty(t))return`http://openweathermap.org/img/wn/${n[t]}@2x.png`;console.log(`No icon found for ${t}`)}(t.weatherDescription.toLowerCase()),e.appendChild(a);const c=document.createElement("div");c.textContent=t.weatherDescription,e.appendChild(c);const d=document.createElement("div");d.classList.add("temperature-container");const i=document.createElement("div");i.textContent=`Hi: ${t.maxTemp}°`,i.classList.add("temperature"),d.appendChild(i);const r=document.createElement("div");return r.textContent=`Lo: ${t.minTemp}°`,r.classList.add("temperature"),d.appendChild(r),e.appendChild(d),e}(t);a.appendChild(e)})),c.appendChild(a)}catch(t){console.log(t)}}o.addEventListener("click",(()=>{a.checkValidity()&&async function(t){d();const n=await async function(t){const n=t.toLowerCase().trim();try{return(await e).filter((t=>t.name.toLowerCase()===n))}catch(t){console.log(t)}}(t);0===n.length?function(t){const e=document.createElement("div");e.classList.add("error-message"),e.textContent="No cities found!",c.appendChild(e)}():1===n.length?i(n[0]):n.forEach((t=>{const e=function(t){const e=document.createElement("div");e.classList.add("city-data-display");const n=document.createElement("div");if(n.textContent=t.name,e.appendChild(n),t.hasOwnProperty("state")){const n=document.createElement("div");n.textContent=t.state,e.appendChild(n)}if(t.hasOwnProperty("country")){const n=document.createElement("div");n.textContent=t.country,e.appendChild(n)}return e}(t);c.appendChild(e),e.addEventListener("click",(()=>{i(t)}))}))}(a.value)}))})();